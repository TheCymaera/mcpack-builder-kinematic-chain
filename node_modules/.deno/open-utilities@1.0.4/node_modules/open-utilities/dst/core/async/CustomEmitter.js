import { Disposable } from "../memory/Disposable.js";
import { Emitter } from "./Emitter.js";
export class CustomEmitter extends Emitter {
    listen(onData) {
        if (this.#subscriptions.includes(onData))
            return Disposable.empty;
        this.#subscriptions.push(onData);
        return new Disposable(() => {
            const index = this.#subscriptions.indexOf(onData);
            if (index !== -1)
                this.#subscriptions.splice(index, 1);
        });
    }
    emit(data) {
        for (const subscription of this.#subscriptions)
            subscription(data);
    }
    #subscriptions = [];
}
